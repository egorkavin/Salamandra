const sidebarOpenButtons=document.querySelectorAll(".sidebar__btn");if(sidebarOpenButtons){function toggleItemsListByFilterName(e,t){t.addEventListener("click",c=>{c.preventDefault(),t.classList.toggle("filter__name--active");const r=e.clientHeight,n=e.parentNode;n.style.maxHeight?n.removeAttribute("style"):n.style.maxHeight=r+"px"})}function setItemsCountInList(e,t){t.addEventListener("change",c=>{let r=t.querySelectorAll('input[type="checkbox"]:checked').length;e.innerHTML=0===r?`(${t.childElementCount})`:`(${r}/${t.childElementCount})`})}sidebarOpenButtons.forEach(e=>{e.addEventListener("click",t=>{const c=e.classList,r=".sidebar--"+c.item(c.length-1).split("--").pop();document.querySelector(r).classList.toggle(r.substr(1)+"--hidden")})}),document.querySelectorAll(".filter").forEach(e=>{const t=e.querySelector(".filter__name");if(t){const c=e.querySelector(".filter__items-list"),r=t.querySelector(".filter__items-count");r.innerHTML="("+c.childElementCount+")",toggleItemsListByFilterName(c,t),setItemsCountInList(r,c)}}),document.querySelectorAll(".filter__item-quantity").forEach(e=>{if("(+0)"===e.textContent){const t=e.closest(".filter__item");t.classList.add("filter__item_disabled"),t.addEventListener("click",e=>e.preventDefault())}})}const paginationSection=document.querySelector(".pages-navigation");if(paginationSection){const e=document.querySelectorAll(".product");let t=4,c=1;function displayPage(e,t,c){const r=(e-1)*t,n=Array.prototype.slice.call(c);n.splice(r,t).forEach(e=>e.removeAttribute("style")),n.forEach(e=>e.style.display="none")}function createPagination(t,c,r){const n=Math.ceil(e.length/c),o=t.querySelector(".pages-navigation__list-of-pages");for(let e=0;e<n;e++){const t=createPageButton(e+1,c,r);o.appendChild(t)}}function createPageButton(e,t,r){const n=document.createElement("li"),o=document.createElement("button");return n.classList.add("pages-navigation__page-wrapper"),o.classList.add("pages-navigation__page-button"),o.textContent=e,e===c&&n.classList.add("pages-navigation__page-wrapper_active"),o.addEventListener("click",()=>{c=e,displayPage(e,t,r),document.querySelector(".pages-navigation__page-wrapper.pages-navigation__page-wrapper_active").classList.remove("pages-navigation__page-wrapper_active"),n.classList.add("pages-navigation__page-wrapper_active")}),n.appendChild(o),n}displayPage(1,t,e),createPagination(paginationSection,t,e)}const tabs=document.querySelectorAll(".product-tabs__item");tabs&&tabs.forEach(e=>{e.addEventListener("click",t=>{const c=document.querySelector(".product-tabs__item--active"),r=document.querySelector("#"+c.dataset.tab),n=document.querySelector("#"+e.dataset.tab);c.classList.remove("product-tabs__item--active"),r.classList.remove("product-tabs__block--active"),e.classList.add("product-tabs__item--active"),n.classList.add("product-tabs__block--active")})});const stars=document.querySelectorAll(".product-rating__star");if(stars){stars.forEach(e=>e.addEventListener("click",()=>{const{value:t}=e.dataset;e.parentNode.dataset.totalValue=t,document.querySelector(".product-rating__note").remove()})),document.querySelectorAll(".year-rate__value").forEach(e=>{const t=e.querySelector(".percent-circle__circle"),c=t.r.baseVal.value,r=2*Math.PI*c;t.style.strokeDasharray=`${r} ${r}`,t.style.strokeDashoffset=r;const n=r-parseInt(e.textContent)/100*r;t.style.strokeDashoffset=n})}const slider=document.querySelector(".product-slider");if(slider){const e=slider.querySelector(".product-slider__track"),t=slider.querySelector(".product-slider__button_next"),c=slider.querySelector(".product-slider__button_prev"),r=slider.querySelectorAll(".product-slider__item-wrapper"),n=r.length,o=[].map.call(r,e=>e.clientWidth),a=calcVisibleItems(o);let s=a,i=0;function calcVisibleItems(e){let t=0;for(let c=0;c<e.length;c++){if(t>=475)return c-1;t+=e[c]}return e.length}function calcOffset(e,t,c){return[].slice.call(e,t,c).reduce((e,t)=>e+t,0)}function calcPrevItems(e,t){let c=0;for(let r=0;r<e.length;r++)if(c+=e[r],t-c<=0)return r+1}t.addEventListener("click",r=>{c.style.opacity="100%",n-s>=3?i+=calcOffset(o,s,s+=3):(i+=calcOffset(o,s,s=n),t.style.opacity="0"),e.style.transform=`translateX(-${i}px)`}),c.addEventListener("click",r=>{t.style.opacity="100%";let n=calcPrevItems(o,i);n>=3?i-=calcOffset(o,s-=3,s+3):(i-=calcOffset(o,0,n),s=a,c.style.opacity="0"),e.style.transform=`translateX(-${i}px)`}),e.addEventListener("click",e=>{if("IMG"==e.target.tagName){document.querySelector(".product__image-wrapper").innerHTML=`\n\t\t\t<img src="${e.target.getAttribute("src")}" class="product__image"></img>\n\t\t\t`}})}const commentVotes=document.querySelectorAll(".comment-vote");if(commentVotes){function checkRating(e){const t=e.closest(".product-comment");e.textContent>=10?t.classList.add("product-comment--good"):e.textContent<=-5?t.classList.add("product-comment--bad"):(t.classList.remove("product-comment--good"),t.classList.remove("product-comment--bad"))}commentVotes.forEach(e=>{const t=e.querySelector(".comment-vote__btn--up"),c=e.querySelector(".comment-vote__btn--down"),r=e.querySelector(".comment-vote__rating");t.addEventListener("click",()=>{r.textContent++,checkRating(r)}),c.addEventListener("click",()=>{r.textContent--,checkRating(r)}),checkRating(r)})}const pricesAtShops=document.querySelectorAll(".product-price__price");pricesAtShops&&pricesAtShops.forEach(e=>{e.textContent.trim().localeCompare("нет в наличии")||(e.style.border="none")});const pcParts=document.querySelectorAll(".pc-part__title");if(pcParts){const e=pcParts[0].getBoundingClientRect(),t=pcParts[1].getBoundingClientRect();document.createElement("svg").innerHTML=`<line id="line1" x1=${e.left} y1=${e.top} x2=${t.left} y2=${t.top} stroke=red/>`}