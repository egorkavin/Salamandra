const sidebarOpenButtons=document.querySelectorAll(".sidebar__btn");if(sidebarOpenButtons){function toggleItemsListByFilterName(t,e){e.addEventListener("click",c=>{c.preventDefault(),e.classList.toggle("filter__name--active");const r=t.clientHeight,n=t.parentNode;n.style.maxHeight?n.removeAttribute("style"):n.style.maxHeight=r+"px"})}function setItemsCountInList(t,e){e.addEventListener("change",c=>{let r=e.querySelectorAll('input[type="checkbox"]:checked').length;t.innerHTML=0===r?`(${e.childElementCount})`:`(${r}/${e.childElementCount})`})}sidebarOpenButtons.forEach(t=>{t.addEventListener("click",e=>{const c=t.classList,r=".sidebar--"+c.item(c.length-1).split("--").pop();document.querySelector(r).classList.toggle(r.substr(1)+"--hidden")})}),document.querySelectorAll(".filter").forEach(t=>{const e=t.querySelector(".filter__name");if(e){const c=t.querySelector(".filter__items-list"),r=e.querySelector(".filter__items-count");r.innerHTML="("+c.childElementCount+")",toggleItemsListByFilterName(c,e),setItemsCountInList(r,c)}}),document.querySelectorAll(".filter__item-quantity").forEach(t=>{if("(+0)"===t.textContent){const e=t.closest(".filter__item");e.classList.add("filter__item_disabled"),e.addEventListener("click",t=>t.preventDefault())}})}const paginationSection=document.querySelector(".pages-navigation");if(paginationSection){const t=document.querySelectorAll(".product");let e=4,c=1;function displayPage(t,e,c){const r=(t-1)*e,n=Array.prototype.slice.call(c);n.splice(r,e).forEach(t=>t.removeAttribute("style")),n.forEach(t=>t.style.display="none")}function createPagination(e,c,r){const n=Math.ceil(t.length/c),a=e.querySelector(".pages-navigation__list-of-pages");for(let t=0;t<n;t++){const e=createPageButton(t+1,c,r);a.appendChild(e)}}function createPageButton(t,e,r){const n=document.createElement("li"),a=document.createElement("button");return n.classList.add("pages-navigation__page-wrapper"),a.classList.add("pages-navigation__page-button"),a.textContent=t,t===c&&n.classList.add("pages-navigation__page-wrapper_active"),a.addEventListener("click",()=>{c=t,displayPage(t,e,r),document.querySelector(".pages-navigation__page-wrapper.pages-navigation__page-wrapper_active").classList.remove("pages-navigation__page-wrapper_active"),n.classList.add("pages-navigation__page-wrapper_active")}),n.appendChild(a),n}displayPage(1,e,t),createPagination(paginationSection,e,t)}const tabs=document.querySelectorAll(".product-tabs__item");tabs&&tabs.forEach(t=>{t.addEventListener("click",e=>{const c=document.querySelector(".product-tabs__item--active"),r=document.querySelector("#"+c.dataset.tab),n=document.querySelector("#"+t.dataset.tab);c.classList.remove("product-tabs__item--active"),r.classList.remove("product-tabs__block--active"),t.classList.add("product-tabs__item--active"),n.classList.add("product-tabs__block--active")})});const stars=document.querySelectorAll(".product-rating__star");if(stars){stars.forEach(t=>t.addEventListener("click",()=>{const{value:e}=t.dataset;t.parentNode.dataset.totalValue=e,document.querySelector(".product-rating__note").remove()})),document.querySelectorAll(".year-rate__value").forEach(t=>{const e=parseInt(t.textContent),c=2*Math.PI*13,r=`\n\t\t<svg class="percent-circle" width="30" height="30">\n\t\t\t<circle class="percent-circle__circle" stroke="#fff"\n\t\t\t\tfill="transparent" stroke-width="2" cx="15" cy="15"\n\t\t\t\tr="13" stroke-dasharray="${c} ${c}" \n\t\t\t\tstroke-dashoffset="${c-e/100*c}"/>\n\t\t</svg>\n\t\t`;t.innerHTML=100===e?"<span>★</span>":`<span>${e}</span>`,t.innerHTML+=r})}const slider=document.querySelector(".product-slider");if(slider){const t=slider.querySelector(".product-slider__track"),e=slider.querySelector(".product-slider__button_next"),c=slider.querySelector(".product-slider__button_prev"),r=slider.querySelectorAll(".product-slider__item-wrapper"),n=r.length,a=[].map.call(r,t=>t.clientWidth),o=calcVisibleItems(a);let s=o,i=0;function calcVisibleItems(t){let e=0;for(let c=0;c<t.length;c++){if(e>=475)return c-1;e+=t[c]}return t.length}function calcOffset(t,e,c){return[].slice.call(t,e,c).reduce((t,e)=>t+e,0)}function calcPrevItems(t,e){let c=0;for(let r=0;r<t.length;r++)if(c+=t[r],e-c<=0)return r+1}e.addEventListener("click",r=>{c.style.opacity="100%",n-s>=3?i+=calcOffset(a,s,s+=3):(i+=calcOffset(a,s,s=n),e.style.opacity="0"),t.style.transform=`translateX(-${i}px)`}),c.addEventListener("click",r=>{e.style.opacity="100%";let n=calcPrevItems(a,i);n>=3?i-=calcOffset(a,s-=3,s+3):(i-=calcOffset(a,0,n),s=o,c.style.opacity="0"),t.style.transform=`translateX(-${i}px)`}),t.addEventListener("click",t=>{if("IMG"==t.target.tagName){document.querySelector(".product__image-wrapper").innerHTML=`\n\t\t\t<img src="${t.target.getAttribute("src")}" class="product__image"></img>\n\t\t\t`}})}const commentVotes=document.querySelectorAll(".comment-vote");if(commentVotes){function checkRating(t){const e=t.closest(".product-comment");t.textContent>=10?e.classList.add("product-comment--good"):t.textContent<=-5?e.classList.add("product-comment--bad"):(e.classList.remove("product-comment--good"),e.classList.remove("product-comment--bad"))}commentVotes.forEach(t=>{const e=t.querySelector(".comment-vote__btn--up"),c=t.querySelector(".comment-vote__btn--down"),r=t.querySelector(".comment-vote__rating");e.addEventListener("click",()=>{r.textContent++,checkRating(r)}),c.addEventListener("click",()=>{r.textContent--,checkRating(r)}),checkRating(r)})}const pricesAtShops=document.querySelectorAll(".product-price__price");pricesAtShops&&pricesAtShops.forEach(t=>{t.textContent.trim().localeCompare("нет в наличии")||(t.style.border="none")});const pcParts=document.querySelector(".pc-parts");if(pcParts){const t=pcParts.querySelectorAll(".pc-part__price"),e=pcParts.querySelector(".pc-parts__total"),c=(t,e)=>t+ +e.textContent.replace(/\s/g,"").replace(/,/g,"."),r=[].reduce.call(t,c,0);e.textContent=Math.round(r).toLocaleString("ru-RU")+" ₽"}