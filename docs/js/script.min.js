const sidebarOpenButtons=document.querySelectorAll(".sidebar__btn");if(sidebarOpenButtons){function toggleItemsListByFilterName(t,e){e.addEventListener("click",c=>{if(c.preventDefault(),!c.target.classList.contains("icon-cancel-filter")){e.classList.toggle("filter__name--active");const c=t.clientHeight,o=t.parentNode;o.style.maxHeight?o.removeAttribute("style"):o.style.maxHeight=c+"px"}})}sidebarOpenButtons.forEach(t=>{t.addEventListener("click",()=>{const e=t.classList,c=".sidebar--"+e.item(e.length-1).split("--").pop();document.querySelector(c).classList.toggle(c.substr(1)+"--hidden")})}),document.querySelectorAll(".filter").forEach(t=>{const e=t.querySelector(".filter__name span");if(e){const c=t.querySelector(".filter__items-list"),o=document.createElement("span");o.innerHTML=` (${c.childElementCount})`,e.insertAdjacentElement("beforeend",o),e.insertAdjacentHTML("beforeend",'<span class="filter__icon filter__icon--arrow"></span>'),toggleItemsListByFilterName(c,e.parentNode),setItemsCountInList(o,c)}}),document.querySelectorAll(".filter__item-quantity").forEach(t=>{if("(+0)"===t.textContent){const e=t.closest(".filter__item");e.classList.add("filter__item--disabled"),e.addEventListener("click",t=>t.preventDefault())}});const t=t=>t.querySelectorAll('input[type="checkbox"]:checked');function setItemsCountInList(e,c){c.addEventListener("change",()=>{const o=e.parentNode,n=t(c).length;if(0===n)r(e);else if(e.innerHTML=`(${n}/${c.childElementCount})`,1===o.parentNode.childElementCount){o.insertAdjacentHTML("beforebegin",'<span class="svg-icon icon-square-box"><span>'),o.insertAdjacentHTML("afterend",'<span class="svg-icon icon-cancel-filter"><span>'),function(e){o.parentNode.querySelector(".svg-icon.icon-cancel-filter").addEventListener("click",()=>{t(c).forEach(t=>{t.checked=!1}),r(e)})}(e)}function r(t){t.innerHTML=`(${c.childElementCount})`,o.parentNode.querySelectorAll(".svg-icon").forEach(t=>o.parentNode.removeChild(t))}})}}const paginationSection=document.querySelector(".pages-navigation");if(paginationSection){const t=document.querySelectorAll(".product"),e=4;let c=1;function displayPage(t,e,c){const o=(t-1)*e,n=Array.prototype.slice.call(c);n.splice(o,e).forEach(t=>t.removeAttribute("style")),n.forEach(t=>{t.style.display="none"})}function createPagination(e,c,o){const n=Math.ceil(t.length/c),r=e.querySelector(".pages-navigation__list-of-pages");for(let t=0;t<n;t++){const e=createPageButton(t+1,c,o);r.appendChild(e)}}function createPageButton(t,e,o){const n=document.createElement("li"),r=document.createElement("button");return n.classList.add("pages-navigation__page-wrapper"),r.classList.add("pages-navigation__page-button"),r.textContent=t,t===c&&n.classList.add("pages-navigation__page-wrapper--active"),r.addEventListener("click",()=>{c=t,displayPage(t,e,o),document.querySelector(".pages-navigation__page-wrapper.pages-navigation__page-wrapper--active").classList.remove("pages-navigation__page-wrapper--active"),n.classList.add("pages-navigation__page-wrapper--active")}),n.appendChild(r),n}displayPage(1,e,t),createPagination(paginationSection,e,t)}const tabs=document.querySelectorAll(".product-tabs__item");tabs&&tabs.forEach(t=>{t.addEventListener("click",()=>{const e=document.querySelector(".product-tabs__item--active"),c=document.querySelector("#"+e.dataset.tab),o=document.querySelector("#"+t.dataset.tab);e.classList.remove("product-tabs__item--active"),c.classList.remove("product-tabs__block--active"),t.classList.add("product-tabs__item--active"),o.classList.add("product-tabs__block--active")})});const stars=document.querySelectorAll(".product-rating__star");stars&&stars.forEach(t=>t.addEventListener("click",()=>{const{value:e}=t.dataset;t.parentNode.dataset.totalValue=e;const c=document.querySelector(".product-rating__note");c&&c.remove()}));const yearRates=document.querySelectorAll(".year-rate");if(yearRates){document.querySelectorAll(".year-rate__value").forEach(t=>{const e=parseInt(t.textContent),c=2*Math.PI*13,o=`\n\t\t<svg class="percent-circle" width="30" height="30">\n\t\t\t<circle class="percent-circle__circle" stroke="#fff"\n\t\t\t\tfill="transparent" stroke-width="2" cx="15" cy="15"\n\t\t\t\tr="13" stroke-dasharray="${c} ${c}" \n\t\t\t\tstroke-dashoffset="${c-e/100*c}"/>\n\t\t</svg>\n\t\t`;t.innerHTML=100===e?"★":""+e,t.innerHTML+=o})}const slider=document.querySelector(".product-slider");if(slider){const t=slider.querySelector(".product-slider__track"),e=slider.querySelector(".product-slider__button_next"),c=slider.querySelector(".product-slider__button_prev"),o=slider.querySelectorAll(".product-slider__item-wrapper"),n=o.length,r=[].map.call(o,t=>Math.round(t.getBoundingClientRect().width)),s=calcVisibleItems(r);let i=s,a=0;function moveTrackForward(){c.style.opacity="100%",c.addEventListener("click",moveTrackBack),n-i>3?a+=calcOffset(r,i,i+=3):(a+=calcOffset(r,i,i=n),e.style.opacity="0",e.removeEventListener("click",moveTrackForward)),t.style.transform=`translateX(-${a}px)`}function moveTrackBack(){e.style.opacity="100%",e.addEventListener("click",moveTrackForward);const o=calcPrevItems(r,a);o>3?a-=calcOffset(r,i-=3,i+3):(a-=calcOffset(r,0,o),i=s,c.style.opacity="0",c.removeEventListener("click",moveTrackBack)),t.style.transform=`translateX(-${a}px)`}function calcVisibleItems(t){let e=0;for(let c=0;c<t.length;c++){if(e>=485)return c-1;e+=t[c]}return t.length}function calcOffset(t,e,c){return[].slice.call(t,e,c).reduce((t,e)=>t+e)}function calcPrevItems(t,e){let c=0;for(let o=0;o<t.length;o++)if(c+=t[o],e-c<=0)return o+1}e.addEventListener("click",moveTrackForward),t.addEventListener("click",t=>{if("IMG"===t.target.tagName){document.querySelector(".product__image-wrapper").innerHTML=`\n\t\t\t<img src="${t.target.getAttribute("src")}" class="product__image"></img>\n\t\t\t`}})}const commentVotes=document.querySelectorAll(".comment-vote");if(commentVotes){function checkRating(t){const e=t.closest(".product-comment");t.textContent>=10?e.classList.add("product-comment--good"):t.textContent<=-5?e.classList.add("product-comment--bad"):(e.classList.remove("product-comment--good"),e.classList.remove("product-comment--bad"))}commentVotes.forEach(t=>{const e=t.querySelector(".comment-vote__btn--up"),c=t.querySelector(".comment-vote__btn--down"),o=t.querySelector(".comment-vote__rating");e.addEventListener("click",()=>{o.textContent++,checkRating(o)}),c.addEventListener("click",()=>{o.textContent--,checkRating(o)}),checkRating(o)})}const pricesAtShops=document.querySelectorAll(".product-price__price");pricesAtShops&&pricesAtShops.forEach(t=>{t.textContent.trim().localeCompare("нет в наличии")||(t.style.border="none")});const pcParts=document.querySelector(".pc-parts");if(pcParts){const t=pcParts.querySelectorAll(".pc-part__price"),e=pcParts.querySelector(".pc-parts__total"),c=(t,e)=>t+ +e.textContent.replace(/\s/g,"").replace(/,/g,"."),o=[].reduce.call(t,c,0);e.textContent=Math.round(o).toLocaleString("ru-RU")+" ₽"}const assemblageParts=document.querySelectorAll(".assemblage-parts__part");assemblageParts&&assemblageParts.forEach(t=>{t.querySelector(".product__title").addEventListener("click",()=>t.classList.toggle("product--collapsed"))});const isWarning=t=>t.classList.contains("conflicts__item--question");function switchConflictsBlockItem(t,e){const c=t.querySelector(".conflicts__item--chosen")||e;isWarning(e)||(c===e?(c.classList.remove("conflicts__item--hover"),c.classList.toggle("conflicts__item--chosen")):(c.classList.remove("conflicts__item--chosen"),e.classList.add("conflicts__item--chosen")))}const conflicts=document.querySelectorAll(".conflicts");if(conflicts){conflicts.forEach(t=>{t.querySelectorAll(".conflicts__item").forEach(e=>{e.addEventListener("click",()=>{switchConflictsBlockItem(t,e),switchConflict(e.dataset.conflictid)}),e.addEventListener("mouseover",()=>{e.classList.add("conflicts__item--hover");const t=e.dataset.conflictid;hoverConflictSVG(t),hoverCircles(t)}),e.addEventListener("mouseout",()=>{e.classList.remove("conflicts__item--hover"),disableHoveredConflictSVG(),disableHoveredCircles()})})})}const viewTypes=document.querySelectorAll(".view-types__type");viewTypes&&viewTypes.forEach(t=>{t.addEventListener("click",()=>{const e=document.querySelector(".view-types__type--active");t!==e&&(e.classList.remove("view-types__type--active"),t.classList.add("view-types__type--active"))})});const pcPartConflicts=document.querySelectorAll(".pc-part[data-conflictID]");if(pcPartConflicts){let t=document.querySelectorAll('.pc-part[data-conflictID="1"]');const e=t=>t.querySelector(".pc-part__title");for(let c=1;t.length>0;)1!==t.length&&setConflictsLines(c,...[].map.call(t,e)),t=document.querySelectorAll(`.pc-part[data-conflictID="${++c}"]`);pcPartConflicts.forEach(t=>{const e=t.querySelector(".pc-part__title"),c=document.createElement("span");c.classList.add("pc-part__conflict-circle"),c.addEventListener("mouseover",()=>{c.classList.add("pc-part__conflict-circle--hover"),hoverConflictSVG(c.closest("[data-conflictid]").dataset.conflictid)}),c.addEventListener("mouseout",()=>{c.classList.remove("pc-part__conflict-circle--hover"),disableHoveredConflictSVG()}),c.addEventListener("click",()=>{const t=c.closest("[data-conflictid]").dataset.conflictid;switchConflict(t),document.querySelectorAll(".conflicts").forEach(e=>{const c=e.querySelector(`.conflicts__item[data-conflictid="${t}"]`);switchConflictsBlockItem(e,c)})}),e.insertAdjacentElement("afterbegin",c)})}function switchConflict(t){const e=document.querySelector(`svg[data-conflictid="${t}"]`);if(e){const c=document.querySelector("svg[data-conflictid].fixed")||e;c===e?(c.classList.remove("hover"),c.classList.toggle("fixed"),disableHoveredCircles(),toggleCircles(t)):(c.classList.remove("fixed","fixed--previous"),e.classList.add("fixed"),disableFixedCircles(),fixCircles(t))}}function disableHoveredConflictSVG(){const t=document.querySelector("svg[data-conflictid].hover");t&&t.classList.remove("hover");const e=document.querySelector("svg[data-conflictid].fixed")||t;if(e!==t){e.classList.remove("fixed--previous");const t=document.querySelectorAll(".pc-part[data-conflictid] .pc-part__conflict-circle--fixed");t&&t.forEach(t=>t.classList.remove("pc-part__conflict-circle--fixed--previous"))}}function hoverConflictSVG(t){const e=document.querySelector(`svg[data-conflictid="${t}"]`);e&&e.classList.add("hover");const c=document.querySelector("svg[data-conflictid].fixed")||e;if(c!==e){c.classList.add("fixed--previous");const t=document.querySelectorAll(".pc-part[data-conflictid] .pc-part__conflict-circle--fixed");t&&t.forEach(t=>t.classList.add("pc-part__conflict-circle--fixed--previous"))}}function disableHoveredCircles(){document.querySelectorAll(".pc-part[data-conflictid] .pc-part__conflict-circle--hover").forEach(t=>{t.classList.remove("pc-part__conflict-circle--hover")})}function hoverCircles(t){document.querySelectorAll(`.pc-part[data-conflictid="${t}"] .pc-part__conflict-circle`).forEach(t=>{t.classList.add("pc-part__conflict-circle--hover")})}function disableFixedCircles(){document.querySelectorAll(".pc-part[data-conflictid] .pc-part__conflict-circle--fixed").forEach(t=>t.classList.remove("pc-part__conflict-circle--fixed","pc-part__conflict-circle--fixed--previous"))}function fixCircles(t){document.querySelectorAll(`.pc-part[data-conflictid="${t}"] .pc-part__conflict-circle`).forEach(t=>t.classList.add("pc-part__conflict-circle--fixed"))}function toggleCircles(t){document.querySelectorAll(`.pc-part[data-conflictid="${t}"] .pc-part__conflict-circle`).forEach(t=>t.classList.toggle("pc-part__conflict-circle--fixed"))}function setConflictsLines(t,...e){const c=e[0].offsetTop,o=e[e.length-1].offsetTop-c,n=`\n\t\t<svg data-conflictid="${t}"\n\t\t\tstyle="position: absolute;top:${c+8-6}px;left:50px;" \n\t\t\twidth="8" height="${o+12}" viewBox="0 0 8 ${o+12}"\n\t\t>\n\t\t\t<polyline \n\t\t\t\tpoints="\n\t\t\t\t\t1.5,6\n\t\t\t\t\t1.5,${o+6}\n\t\t\t\t"\n\t\t\t\tfill="transparent" stroke="#e0a006" stroke-dasharray="4px"\n\t\t\t/>\n\t\t\t${e.map(t=>`\n\t\t<polyline \n\t\t\tpoints="\n\t\t\t\t1,${t.offsetTop-c+5}.5\n\t\t\t\t6,${t.offsetTop-c+5}.5\n\t\t\t"\n\t\t\tstroke="#e0a006"\n\t\t/>\n\t\t<polyline \n\t\t\tpoints="\n\t\t\t\t7.5,${t.offsetTop-c}\n\t\t\t\t7.5,${t.offsetTop-c+11}\n\t\t\t"\n\t\t\tstroke="#e0a006"\n\t\t/>\n\t`).join("")}\n\t\t</svg>\n\t`;document.querySelector(".sidebar__pc-parts").insertAdjacentHTML("beforeend",n)}const dataIcons=document.querySelectorAll("[data-icon]");dataIcons.forEach(t=>{const e=t.dataset.icon;if(t.classList.contains("pc-parts__choose-item"))t.insertAdjacentHTML("afterbegin",`<span class="svg-icon icon-${e}"></span>`);else{t.querySelector(".pc-part__title").insertAdjacentHTML("afterbegin",`<span class="svg-icon icon-${e}"></span>`)}});const pcPartsDescriptions=document.querySelectorAll(".pc-part__description");pcPartsDescriptions&&pcPartsDescriptions.forEach(t=>{const e=t.querySelector(".pc-part__title"),c=e.querySelector("p"),o=t.querySelector(".pc-part__details");215===c.offsetWidth&&e.classList.add("pc-part__title--gradient"),215===o.offsetWidth&&o.classList.add("pc-part__details--gradient")});